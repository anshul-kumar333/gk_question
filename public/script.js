let questions = [
  {
    question: "What does the acronym 'BIOS' stand for in computing?",
    options: ["a) Basic Integrated Operating System", "b) Basic Input/Output System", "c) Binary Input/Output System", "d) Basic Internal Operating System"],
    correctAnswer: "b) Basic Input/Output System"
  },
  {
    question: "Which of the following is a programming language primarily used for web development?",
    options: ["a) C#", "b) JavaScript", "c) SQL", "d) Assembly"],
    correctAnswer: "b) JavaScript"
  },
  {
    question: "What is the primary function of the CPU in a computer?",
    options: ["a) To store data", "b) To perform calculations and execute instructions", "c) To connect to the internet", "d) To display graphics"],
    correctAnswer: "b) To perform calculations and execute instructions"
  },
  {
    question: "Which device is used to input graphical data into a computer?",
    options: ["a) Keyboard", "b) Scanner", "c) Mouse", "d) Printer"],
    correctAnswer: "c) Mouse"
  },
  {
    question: "What is the purpose of an operating system?",
    options: ["a) To perform calculations", "b) To manage computer hardware and software resources", "c) To create documents", "d) To browse the internet"],
    correctAnswer: "b) To manage computer hardware and software resources"
  },
  {
    question: "Which of the following is an example of an open-source operating system?",
    options: ["a) Windows", "b) macOS", "c) Linux", "d) iOS"],
    correctAnswer: "c) Linux"
  },
  {
    question: "What is the primary function of a firewall?",
    options: ["a) To manage hardware resources", "b) To protect a network from unauthorized access", "c) To enhance graphics performance", "d) To run applications"],
    correctAnswer: "b) To protect a network from unauthorized access"
  },
  {
    question: "What is cloud computing primarily used for?",
    options: ["a) Storing data on local devices", "b) Running applications on remote servers accessed via the internet", "c) Creating physical backups", "d) Enhancing network speed"],
    correctAnswer: "b) Running applications on remote servers accessed via the internet"
  },
  {
    question: "Which of the following components is responsible for storing data permanently in a computer?",
    options: ["a) RAM", "b) CPU", "c) Hard Drive", "d) Motherboard"],
    correctAnswer: "c) Hard Drive"
  },
  {
    question: "What is the term for malicious software that disguises itself as legitimate software?",
    options: ["a) Adware", "b) Spyware", "c) Trojan Horse", "d) Ransomware"],
    correctAnswer: "c) Trojan Horse"
  },
  {
    question: "Which organ in the human body is primarily responsible for detoxifying chemicals?",
    options: ["a) Heart", "b) Kidneys", "c) Liver", "d) Lungs"],
    correctAnswer: "c) Liver"
  },
  {
    question: "What is the largest ocean on Earth?",
    options: ["a) Atlantic Ocean", "b) Indian Ocean", "c) Arctic Ocean", "d) Pacific Ocean"],
    correctAnswer: "d) Pacific Ocean"
  },
  {
    question: "Who invented the telephone?",
    options: ["a) Alexander Graham Bell", "b) Thomas Edison", "c) Nikola Tesla", "d) Guglielmo Marconi"],
    correctAnswer: "a) Alexander Graham Bell"
  },
  {
    question: "What is the capital city of Japan?",
    options: ["a) Kyoto", "b) Tokyo", "c) Osaka", "d) Hiroshima"],
    correctAnswer: "b) Tokyo"
  },
  {
    question: "Which element has the chemical symbol 'O'?",
    options: ["a) Gold", "b) Oxygen", "c) Osmium", "d) Oganesson"],
    correctAnswer: "b) Oxygen"
  },
  {
    question: "Which historical event is celebrated on July 4th in the United States?",
    options: ["a) Thanksgiving", "b) Independence Day", "c) Memorial Day", "d) Labor Day"],
    correctAnswer: "b) Independence Day"
  },
  {
    question: "In which year did the first man land on the moon?",
    options: ["a) 1965", "b) 1969", "c) 1971", "d) 1975"],
    correctAnswer: "b) 1969"
  },
  {
    question: "What is the largest continent on Earth?",
    options: ["a) Africa", "b) Asia", "c) Europe", "d) Antarctica"],
    correctAnswer: "b) Asia"
  },
  {
    question: "Which famous scientist developed the theory of relativity?",
    options: ["a) Isaac Newton", "b) Albert Einstein", "c) Niels Bohr", "d) Galileo Galilei"],
    correctAnswer: "b) Albert Einstein"
  },
  {
    question: "What is the currency of Japan?",
    options: ["a) Yen", "b) Won", "c) Yuan", "d) Ringgit"],
    correctAnswer: "a) Yen"
  },
  {
    question: "Which country hosted the G20 summit in 2024?",
    options: ["a) India", "b) China", "c) Brazil", "d) Saudi Arabia"],
    correctAnswer: "c) Brazil"
  },
  {
    question: "Which Indian state has been declared the first 'Har Ghar Jal' certified state in 2024?",
    options: ["a) Punjab", "b) Gujarat", "c) Haryana", "d) Goa"],
    correctAnswer: "d) Goa"
  },
  {
    question: "Who is the current Chief Justice of India (as of 2024)?",
    options: ["a) N.V. Ramana", "b) D.Y. Chandrachud", "c) U.U. Lalit", "d) Sharad Arvind Bobde"],
    correctAnswer: "b) D.Y. Chandrachud"
  },
  {
    question: "What is the largest planet in our solar system?",
    options: ["a) Earth", "b) Mars", "c) Saturn", "d) Jupiter"],
    correctAnswer: "d) Jupiter"
  },
  {
    question: "In which year did World War II end?",
    options: ["a) 1939", "b) 1941", "c) 1945", "d) 1950"],
    correctAnswer: "c) 1945"
  },
  {
    question: "Which company developed the popular software suite 'Microsoft Office'?",
    options: ["a) Google", "b) Apple", "c) Microsoft", "d) IBM"],
    correctAnswer: "c) Microsoft"
  },
  {
    question: "What does 'RAM' stand for in computer technology?",
    options: ["a) Random Access Memory", "b) Read Any Memory", "c) Run Access Memory", "d) Remote Access Module"],
    correctAnswer: "a) Random Access Memory"
  },
  {
    question: "Who wrote the Indian national anthem 'Jana Gana Mana'?",
    options: ["a) Rabindranath Tagore", "b) Bankim Chandra Chattopadhyay", "c) Mahatma Gandhi", "d) Sarojini Naidu"],
    correctAnswer: "a) Rabindranath Tagore"
  },
  {
    question: "Which of these programming languages is primarily used for developing web pages?",
    options: ["a) Python", "b) JavaScript", "c) C++", "d) R"],
    correctAnswer: "b) JavaScript"
  },
  {
    question: "The term 'gigabyte' refers to which unit of digital data?",
    options: ["a) 1,024 bytes", "b) 1,024 kilobytes", "c) 1,024 megabytes", "d) 1,024 terabytes"],
    correctAnswer: "c) 1,024 megabytes"
  }
];

let currentQuestionIndex = 0;
let timeLeft = 30;
let timerInterval;
let score = 0;  // Initialize user score

// Function to display the next question
function showQuestion() {
  let questionElement = document.getElementById('question');
  let optionsElement = document.getElementById('options');
  let timerElement = document.getElementById('timer');

  let question = questions[currentQuestionIndex];

  // Display the question
  questionElement.innerText = question.question;
  optionsElement.innerHTML = '';  // Clear previous options
  
  // Create and display the options
  question.options.forEach(option => {
    let button = document.createElement('button');
    button.innerText = option;
    button.disabled = false;  // Ensure the buttons are enabled when new question appears
    button.addEventListener('click', function() {
      checkAnswer(option, button);
    });
    optionsElement.appendChild(button);
  });

  // Display and start the countdown
  timerElement.innerText = `Time left: ${timeLeft}`;
  startCountdown();
}

// Function to start the countdown timer
function startCountdown() {
  timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById('timer').innerText = `Time left: ${timeLeft}`;

    if (timeLeft === 0) {
      clearInterval(timerInterval);
      disableButtons(); // Disable options after time is up
      document.getElementById('question').innerText = 'Time is up!';
      setTimeout(nextQuestion, 1000); // Automatically go to the next question after 1 second
    }
  }, 1000);
}

// Function to disable buttons after time is up
function disableButtons() {
  let buttons = document.querySelectorAll('#options button');
  buttons.forEach(button => {
    button.disabled = true;
  });
}

// Function to go to the next question
async function nextQuestion() {
  currentQuestionIndex++;
  if (currentQuestionIndex < questions.length) {
    timeLeft = 30;  // Reset the timer for the next question
    showQuestion();  // Show the next question
  } else {
    await submitScore(localStorage.getItem('username'), score); // Submit score after the last question
    alert(`Game Over! Your score is: ${score}`);
    window.location.href = 'login.html'; // Redirect to login page after game over
  }
}

// Function to check the selected answer
function checkAnswer(selectedOption, button) {
  let correctAnswer = questions[currentQuestionIndex].correctAnswer;

  // Stop the timer
  clearInterval(timerInterval);

  // Change background color based on the answer
  if (selectedOption === correctAnswer) {
    button.style.backgroundColor = '#fffb00';  // Correct answer
    score++;  // Increment score for correct answer
  } else {
    button.style.backgroundColor = 'rgb(231, 70, 70)';  // Wrong answer
    // Highlight the correct answer in green
    document.querySelectorAll('#options button').forEach(btn => {
      if (btn.innerText === correctAnswer) {
        btn.style.backgroundColor = 'green'; // Highlight correct answer
      }
    });
  }

  // Disable all buttons after selection
  disableButtons();

  setTimeout(nextQuestion, 1000);  // Move to the next question after a short delay
}

// Function to submit the score to the server
async function submitScore(username, score) {
  await fetch('/api/scores', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ username, score }),
  });
}

// Start the game when the page loads
window.onload = showQuestion;
